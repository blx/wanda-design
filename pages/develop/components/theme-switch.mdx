import { useState } from "react";
import { MdxLayout } from "@/components/layouts/mdx";
import { LiveArea } from "@/components/live-area";
import { Props } from "@/components/props";
import { ThemeSwitch } from "@wonderflow/react-components";
import { useTheme } from "next-themes";

export const CustomSwitcher = () => {
  const [fakeTheme, setFakeTheme] = useState(null);
  return (
    <ThemeSwitch
      currentTheme={fakeTheme}
      onChange={({ currentTarget }) => setFakeTheme(currentTarget.value)}
    />
  );
};

export default ({ children }) => (
  <MdxLayout
    title="Theme Switch"
    description="A way to force the dark side"
    showMeta
    showPlayground
    features={[
      "Keyboard accessible",
      "Option to set theme based on the system",
      "Themes ready",
    ]}
    links={[
      {
        label: "ARIA design",
        url: "https://www.w3.org/TR/wai-aria-1.2/#select",
      },
      {
        label: "ARIA authoring",
        url: "https://www.w3.org/TR/wai-aria-practices-1.2/#Listbox",
      },
    ]}
    hero={
      <LiveArea direction="row" horizontalAlign="center" fill={false}>
        <CustomSwitcher />
      </LiveArea>
    }
  >
    {children}
  </MdxLayout>
);

## Anatomy

The `ThemeSwitch` is a stateless component which provides the UI to change the theme inside your application. If you want to use it, you have to pair it with a theme provider — which commonly wraps the whole application — and pass the theme to `ThemeSwitch` from the context provider through the `currentTheme` property.

The `onChange` property allows you to change the theme on value change. This component is made for basic usage with only light/dark/system themes. If you want to add more themes, you have to build your own component.

```tsx highlight=2,3,6,9-12
// CSS containing the themes variables
import "@wonderflow/react-components/themes.css";
import { ThemeSwitch } from "@wonderflow/react-components";

export default () => {
  const [theme, setTheme] = useTheme();

  return (
    <ThemeSwitch
      onChange={({ currentTarget }) => setTheme(currentTarget.value)}
      currentTheme={theme}
    />
  );
};
```

## API Reference

<Props
  properties={[
    {
      name: "currentTheme",
      type: ["string"],
      default: '"system"',
      required: false,
      dangerous: false,
      description: "Set the icon and the initial value",
    },
    {
      name: "onChange",
      type: ["SelectProps['onChange']"],
      default: "",
      required: true,
      dangerous: false,
      description: "Callback for the change event",
    },
  ]}
/>

## Accessibility

Adheres to the [`select` role requirements](https://www.w3.org/TR/wai-aria-1.2/#select).

### Keyboard interactions

<Props
  properties={[
    {
      name: "tab",
      description: "Move focus on the element or outside",
    },
    {
      name: "space",
      description: "Open the listbox",
    },
  ]}
/>
